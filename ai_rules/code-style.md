# Go 代码规范

## 命名规范
- **包名**：使用小写字母，简短且有意义，避免使用下划线或驼峰命名（如 `fmt`、`net/http`）
- **文件名**：使用小写字母，单词间用下划线分隔（snake_case），如 `http_server.go`
- **常量**：使用全大写，单词间用下划线分隔（CONSTANT_CASE），如 `MAX_RETRY_COUNT`
- **变量和函数**：使用小驼峰命名法（camelCase），如 `userName`、`calculateTotal()`
- **类型**：使用大驼峰命名法（PascalCase），如 `User`、`HttpServer`
- **接口**：通常使用单个方法名加 `er` 后缀，如 `Reader`、`Writer`

## 代码格式
- **缩进**：使用制表符（tab）进行缩进，而非空格
- **行宽**：每行代码长度建议不超过80个字符
- **大括号**：左大括号不换行，右大括号单独占一行
- **空格**：
  - 操作符两侧添加空格，如 `a = b + c`
  - 逗号后添加空格，如 `func(a, b int)`
  - 括号内侧不添加空格，如 `if (condition)` 应为 `if condition`

## 代码格式化
- **使用 gofmt**：Go 官方提供的代码格式化工具，确保代码风格一致
- **使用 go vet**：检查代码中的常见错误和潜在问题
- **使用 golangci-lint**：集成多种 lint 工具，提供更全面的代码质量检查

## 注释规范
- **包注释**：每个包应有包级注释，位于文件顶部，说明包的功能
- **函数注释**：导出函数（首字母大写）应有注释，说明功能、参数和返回值
- **行注释**：使用 `//` 进行单行注释，注释应简洁明了
- **注释风格**：注释应使用完整句子，首字母大写，句末加标点

## 错误处理
- **显式处理错误**：不要忽略错误，应显式处理或返回
- **错误类型**：使用 `error` 接口作为错误类型
- **错误包装**：使用 `fmt.Errorf` 或 `errors.Wrap` 添加错误上下文
- **错误检查**：通常使用 `if err != nil` 模式检查错误

## 包管理
- **使用 Go Modules**：Go 1.11+ 推荐使用 Go Modules 进行依赖管理
- **版本控制**：明确指定依赖版本，避免使用 `latest`
- **依赖清理**：定期运行 `go mod tidy` 清理未使用的依赖

## 最佳实践
- **避免使用全局变量**：优先使用函数参数和返回值
- **使用短变量声明**：在函数内部使用 `:=` 进行变量声明
- **优先使用值类型**：对于小结构体，优先使用值类型而非指针
- **接口设计**：接口应小而专注，通常只包含1-3个方法
- **并发安全**：注意并发操作的安全性，使用适当的同步机制
- **性能优化**：避免不必要的内存分配，使用 `sync.Pool` 等工具

## 代码组织
- **文件结构**：按功能组织文件，相关功能放在同一目录
- **包结构**：保持包的职责单一，避免过大的包
- **导入顺序**：标准库 -> 第三方库 -> 本地库，各组之间用空行分隔

## 测试规范
- **测试文件**：测试文件命名为 `*_test.go`
- **测试函数**：测试函数命名为 `TestXxx`，基准测试为 `BenchmarkXxx`
- **测试覆盖率**：追求高测试覆盖率，但更注重测试质量
- **测试隔离**：测试用例应相互隔离，避免依赖

## 文档规范
- **使用 godoc**：遵循 godoc 文档标准，使代码可自动生成文档
- **README文件**：每个项目应有 README.md 文件，说明项目功能和使用方法
- **示例代码**：为重要功能提供示例代码

## 版本规范
- **语义化版本**：遵循语义化版本规范（Semantic Versioning）
- **Git提交信息**：提交信息应清晰明了，说明修改内容

## 安全性
- **输入验证**：对所有用户输入进行验证
- **避免SQL注入**：使用参数化查询或ORM
- **避免XSS攻击**：对输出进行适当转义
- **密码处理**：使用安全的密码哈希算法
- **敏感信息**：避免在代码中硬编码敏感信息

## 性能考虑
- **内存分配**：减少不必要的内存分配
- **I/O操作**：优化I/O操作，使用缓冲
- **并发处理**：合理使用 goroutine 和 channel
- **算法选择**：选择合适的算法和数据结构

## 可维护性
- **代码复用**：提取重复代码为函数或方法
- **模块化**：将功能分解为小的、可管理的模块
- **文档更新**：代码变更时同步更新文档
- **代码审查**：定期进行代码审查，确保代码质量## 空值判断